{"version":3,"sources":["webpack:///webpack/bootstrap 8ab8d673a78ae5fb601c","webpack:///./24hour.js"],"names":["margin","top","right","bottom","left","width","height","projection","d3","geoMercator","translate","scale","Math","PI","path","geoPath","svg","select","append","attr","g","gQuakes","json","error","world","dateObj","Date","setDate","getDate","worldMap","datum","topojson","merge","objects","countries","geometries","mesh","a","b","x","scaleTime","domain","range","xAxis","call","axisTop","data","quake","features","reverse","earthquakeGroups","selectAll","enter","d","id","geometry","coordinates","style","text","properties","mag","place","setQuakeDelay","i","max","length","timeDiff","time","timeDiffObj","delay","parse","longestDelay","quakeCircles","transition","duration","pulseCircles","remove","timeline","ease","easeLinear"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8ab8d673a78ae5fb601c","// Setup the svg element size and margins\r\nvar margin = {top: 20, right: 20, bottom: 20, left: 20},\r\n    width = 1200 - margin.left - margin.right,\r\n    height = 800 - margin.top - margin.bottom;\r\n\r\n// Set the projection methods for the world map\r\nvar projection = d3.geoMercator()\r\n                   .translate([width/2, height/1.5])\r\n                   .scale((width - 1) / 2 / Math.PI);\r\n\r\n// Set the world map path\r\nvar path = d3.geoPath()\r\n    .projection(projection);\r\n\r\n// Create a variable to hold the main svg element\r\nvar svg = d3.select(\"body\").append(\"svg\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height);\r\n\r\n// Group to hold the maps and borders\r\nvar g = svg.append('g')\r\n           .attr('id', 'world-map');\r\n\r\n// Add a clip path element to the world map group\r\n// for the x axis\r\ng.append('clipPath')\r\n .attr('id', 'clip-path')\r\n .append('rect')\r\n .attr('x', 0)\r\n .attr('y', 30)\r\n .attr('width', width)\r\n .attr('height', height - 30)\r\n\r\n// Group to hold all of the earthquake elements\r\nvar gQuakes = svg.append('g')\r\n                 .attr('id', 'all-quakes');\r\n\r\n// Import the geoJSON file for the world map\r\nd3.json('https://s3-us-west-2.amazonaws.com/s.cdpn.io/25240/world-110m.json', function(error, world) {\r\n    if(error) throw error;\r\n\r\n    // Setup 24 hours ago object\r\n    var dateObj = new Date();\r\n    dateObj.setDate(dateObj.getDate() - 1);\r\n\r\n    // Append the World Map\r\n    var worldMap = g.append('path')\r\n     .attr('clip-path', 'url(#clip-path)') // attaches the clip path to not draw the map underneath the x axis\r\n     .datum(topojson.merge(world, world.objects.countries.geometries)) // draws a single land object for the entire map\r\n     .attr('class', 'land')\r\n     .attr('d', path)\r\n\r\n    // Append the World Map Country Borders\r\n    g.append('path')\r\n     .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))\r\n     .attr('class', 'boundry')\r\n     .attr('d', path);\r\n\r\n    // Create the x scale based on the domain of the 24 hour ago object and now\r\n    var x = d3.scaleTime()\r\n                        .domain([dateObj, new Date()])\r\n                        .range([0, width - margin.right - margin.left]);\r\n\r\n    // Append the xAxis on top\r\n    var xAxis = svg.append('g')\r\n                                 .attr('id', 'xAxis')\r\n                                 .attr('transform', 'translate(20, 20)')\r\n                                 .call(d3.axisTop(x));\r\n\r\n    // Import the last 24 hours of earthquake data from USGS\r\n    d3.json('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson', function(error, data) {\r\n        if(error) throw error;\r\n        var quake = data.features.reverse();\r\n\r\n        // Create a group with the quake id to hold the quake circle and pulse circle\r\n        var earthquakeGroups = gQuakes.selectAll('g')\r\n           .data(quake)\r\n           .enter().append('g')\r\n           .attr('id', function(d) {\r\n                 return d.id;\r\n           })\r\n           .attr('class', 'quake-group');\r\n\r\n        //Create the pulse-circle circles for the earthquake pulse\r\n        gQuakes.selectAll('.quake-group')\r\n           .append('circle')\r\n           .attr('class', 'circle pulse-circle')\r\n           .attr('cx', function(d) {\r\n                 return projection([d.geometry.coordinates[0], d.geometry.coordinates[1]])[0];\r\n           })\r\n           .attr('cy', function(d) {\r\n                 return projection([d.geometry.coordinates[0], d.geometry.coordinates[1]])[1];\r\n           })\r\n             .attr('r', function(d) {\r\n                 return 0;\r\n           })\r\n           .attr('fill', '#fff');\r\n\r\n        // Create the main quake circle with title\r\n        gQuakes.selectAll('.quake-group')\r\n          .append('circle')\r\n            .attr('cx', function(d) {\r\n                 return projection([d.geometry.coordinates[0], d.geometry.coordinates[1]])[0];\r\n           })\r\n          .attr('cy', function(d) {\r\n                 return projection([d.geometry.coordinates[0], d.geometry.coordinates[1]])[1];\r\n           })\r\n          .attr('r', 0 )\r\n          .attr('class', 'circle quake-circle')\r\n          .style('fill', 'red')\r\n          .style('opacity', 0.75)\r\n          .append('title')\r\n          .text(function(d) {\r\n            return 'Magnitue ' + d.properties.mag + ' ' + d.properties.place;\r\n          });\r\n\r\n\r\n        // Function that calculates the difference between the earthquake and 24 hours ago and\r\n        // creates a delay property.\r\n        var setQuakeDelay = function() {\r\n            for(var i = 0, max = quake.length; i < max; i++){\r\n                var timeDiff = quake[i].properties.time - dateObj;\r\n                var timeDiffObj = new Date(timeDiff);\r\n                quake[i].delay = Date.parse(timeDiffObj) / 5000; // Speed up the animation, otherwise it would take 24 hours ><\r\n            }\r\n        }\r\n        setQuakeDelay();\r\n\r\n        // Grab the longest delay for the xAxis marker\r\n        var longestDelay = quake[quake.length - 1].delay;\r\n\r\n        // Changes the radius of the earthquakes to their magnitue using a transition\r\n        // and the delay created from the setQuakeDelay function\r\n        var quakeCircles = svg.selectAll('.quake-circle')\r\n             .data(quake)\r\n             .transition()\r\n             .delay(function(d) {\r\n                 return d.delay;\r\n             })\r\n             .duration(1000)\r\n             .attr('r', function(d) {\r\n               if(d.properties.mag < 0) {\r\n                     return 0.1;\r\n                 } else {\r\n                     return d.properties.mag\r\n                 }\r\n             });\r\n\r\n        // Changes the radius of the pulse circle to eight times the magnitude\r\n        // and fades out as it expands over two seconds\r\n        var pulseCircles = svg.selectAll('.pulse-circle')\r\n             .data(quake)\r\n             .transition()\r\n             .delay(function(d) {\r\n                 return d.delay;\r\n             })\r\n             .duration(2000)\r\n             .attr('r', function(d) {\r\n               if(d.properties.mag < 0) {\r\n                     return 0.1 * 8;\r\n                 } else {\r\n                     return d.properties.mag * 8;\r\n                 }\r\n             })\r\n             .style('opacity', 0)\r\n           .remove()\r\n\r\n        // Add the time marker that moves across the xAxis while the animation it playing.\r\n        // It's not perfectly in sync, but it's close enough for this example. The length of\r\n        // the animation is equal to the longest delay that we calculated earlier.\r\n        var timeline = xAxis.append('circle')\r\n             .attr('class', 'transition-circle')\r\n             .attr('cx', 0)\r\n             .attr('cy', 0)\r\n             .attr('r', 3)\r\n             .style('fill', 'red')\r\n             .transition()\r\n               .ease(d3.easeLinear)\r\n             .duration(longestDelay + 1000)\r\n             .attr('cx', 1120)\r\n    })\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./24hour.js"],"sourceRoot":""}